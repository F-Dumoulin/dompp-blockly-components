<!DOCTYPE html>

<html>
  <head>

    <meta charset="utf-8" />
    <title>Demo</title>
    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../node_modules/lit/polyfill-support.js"></script>
    <script type="module" src="../src/components/basic-selection.js"></script>
    <script type="module" src="../src/components/advanced-selection.js"></script>
    <script type="module" src="../src/components/dompp-test-manager.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/6.20210701.0/blockly_compressed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/6.20210701.0/blocks_compressed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/6.20210701.0/javascript_compressed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/6.20210701.0/msg/en.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="../src/blocks/quantifier.js"></script>
    <script src="../src/blocks/selector.js"></script>
    <script src="../src/blocks/condition.js"></script>
    <script src="../src/blocks/property.js"></script>
    <script src="../src/blocks/operator.js"></script>
    <script src="../src/blocks/action.js"></script>
    <script src="../src/blocks/other.js"></script>

  </head>
  <body>
    <dompp-test-manager 
        data-tests = ' [
           {
                "name": "Test 1", 
                "xml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"evaluation\" id=\"fZB;_z%6NTTVK?7YPgCz\" x=\"100\" y=\"100\"><statement name=\"eval\"><block type=\"q_forall\" id=\"zmG`POaBj}Bf(]#F2m06\"><value name=\"selector\"><block type=\"s_findbyselector\" id=\"$O*8Y6)DQa6-O~)7F3D[\"><field name=\"fbs_selector\">h1</field></block></value><value name=\"condition\"><block type=\"c_comparetovalue\" id=\"!vAnk2D[W.[wlP7[TZbZ\"><field name=\"cpt_value\">100</field><value name=\"property\"><block type=\"prop_offsettop\" id=\"JkA[=+a@HR9X_+6-`Tx.\"></block></value><value name=\"operator\"><block type=\"op_lesserorequal\" id=\"R|X~fROYmzA64l:m}(q}\"></block></value></block></value></block></statement></block></xml>"
            },
            {
                "name": "Test 2", 
                "xml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"evaluation\" id=\"fZB;_z%6NTTVK?7YPgCz\" x=\"100\" y=\"100\"><statement name=\"eval\"><block type=\"q_forall\" id=\"zmG`POaBj}Bf(]#F2m06\"><value name=\"selector\"><block type=\"s_findbyselector\" id=\"$O*8Y6)DQa6-O~)7F3D[\"><field name=\"fbs_selector\">h1</field></block></value><value name=\"condition\"><block type=\"c_comparetovalue\" id=\"!vAnk2D[W.[wlP7[TZbZ\"><field name=\"cpt_value\">200</field><value name=\"property\"><block type=\"prop_offsettop\" id=\"JkA[=+a@HR9X_+6-`Tx.\"></block></value><value name=\"operator\"><block type=\"op_lesserorequal\" id=\"R|X~fROYmzA64l:m}(q}\"></block></value></block></value></block></statement></block></xml>"
            },
            {
                "name": "Test 3", 
                "xml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"evaluation\" id=\"fZB;_z%6NTTVK?7YPgCz\" x=\"100\" y=\"100\"><statement name=\"eval\"><block type=\"q_forall\" id=\"zmG`POaBj}Bf(]#F2m06\"><value name=\"selector\"><block type=\"s_findbyselector\" id=\"$O*8Y6)DQa6-O~)7F3D[\"><field name=\"fbs_selector\">h1</field></block></value><value name=\"condition\"><block type=\"c_comparetovalue\" id=\"!vAnk2D[W.[wlP7[TZbZ\"><field name=\"cpt_value\">300</field><value name=\"property\"><block type=\"prop_offsettop\" id=\"JkA[=+a@HR9X_+6-`Tx.\"></block></value><value name=\"operator\"><block type=\"op_lesserorequal\" id=\"R|X~fROYmzA64l:m}(q}\"></block></value></block></value></block></statement></block></xml>"
            },
            {
                "name": "Test 4", 
                "xml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"evaluation\" id=\"fZB;_z%6NTTVK?7YPgCz\" x=\"100\" y=\"100\"><statement name=\"eval\"><block type=\"q_forall\" id=\"zmG`POaBj}Bf(]#F2m06\"><value name=\"selector\"><block type=\"s_findbyselector\" id=\"$O*8Y6)DQa6-O~)7F3D[\"><field name=\"fbs_selector\">h1</field></block></value><value name=\"condition\"><block type=\"c_comparetovalue\" id=\"!vAnk2D[W.[wlP7[TZbZ\"><field name=\"cpt_value\">400</field><value name=\"property\"><block type=\"prop_offsettop\" id=\"JkA[=+a@HR9X_+6-`Tx.\"></block></value><value name=\"operator\"><block type=\"op_lesserorequal\" id=\"R|X~fROYmzA64l:m}(q}\"></block></value></block></value></block></statement></block></xml>"
            }
        ] '

        data-pages = ' [
            {"url": "www.site.com"},
            {"url": "www.site.com/page123456789"},
            {"url": "www.site.com/page2"},
            {"url": "www.site.com/page3"}
        ] '
    >
    </dompp-test-manager>
    <script type="text/javascript">

            //implementing a callback on the events provided by the test manager 

            let testManager = document.querySelector("dompp-test-manager");
            testManager.addEventListener('save-tests', (e) => { //callback on everytime a test is saved/created/deleted/renamed in the editor
                console.log(e.detail.type);
                console.log(e.detail.data);
                //...
            });

            testManager.addEventListener('run-tests', (e) => { //callback on running tests with after selecting a test configuration 
                console.log(e.detail.data);
                //...
            });
    </script>
  </body>
</html>
